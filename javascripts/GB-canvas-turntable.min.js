!function(){function t(t){return k?k+t:t.toLowerCase()}function e(t){return t=t.toLowerCase(),w?w+t:t}function n(t){h=t.getPrize,E=t.gotBack,t.config(function(e){v=t.prizes=e,p=v.length,i(t)}),s()}function i(t){if(t=t||{},t.id&&p>>>0!==0){var e,n=t.id,i=360/p/2+90,r=document.createElement("ul"),s=1/p,o=[];if(b=d(n),g=b.querySelector(".gb-turntable-canvas"),m=b.querySelector(".gb-turntable-container"),y=b.querySelector(".gb-turntable-btn"),!g.getContext)return void a("抱歉！浏览器不支持。");e=g.getContext("2d");for(var c=0;c<p;c++)e.save(),e.beginPath(),e.translate(150,150),e.moveTo(0,0),e.rotate((360/p*c-i)*Math.PI/180),e.arc(0,0,150,0,2*Math.PI/p,!1),c%2==0?e.fillStyle="#ffb820":e.fillStyle="#ffcb3f",e.fill(),e.lineWidth=.5,e.strokeStyle="#e4370e",e.stroke(),e.restore(),o.push('<li class="gb-turntable-item"> <span style="'+P+": rotate("+c*s+'turn)">'+t.prizes[c]+"</span> </li>"),c+1===p&&(r.className="gb-turntalbe-list",m.appendChild(r),r.innerHTML=o.join(""))}}function a(t){alert(t)}function r(t){m.style[P]="rotate("+t+"deg)"}function s(){c(y,"click",function(){u(y,"disabled"),h(function(t){L={prizeId:t[0],chances:t[1]},T=T||0,T=T+(360-T%360)+(3600-t[0]*(360/p)),r(T)}),c(m,S,o)})}function o(){L.chances&&f(y,"disabled"),E(v[L.prizeId])}function c(t,e,n){"function"==typeof addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function l(t,e){return!(!t||!e)&&(t.classList?t.classList.contains(e):t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")))}function u(t,e){t.classList?t.classList.add(e):l(t,e)||(t.className+=""+e)}function f(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}var d,b,m,g,p,v,y,h,E,L,w,k,T=0,z={"":"",Webkit:"webkit",Moz:"",O:"o",ms:"ms"},C=document.createElement("p"),N={};Object.keys(z).some(function(t){if(void 0!==C.style[t+"TransitionProperty"])return w=t?"-"+t.toLowerCase()+"-":"",k=z[t],!0}),N={cssPrefix:w,transform:e("Transform"),transitionEnd:t("TransitionEnd")};var P=N.transform,S=N.transitionEnd;d=function(t){return document.getElementById(t)};var x={init:function(t){return n(t)}};void 0===window.gbTurntable&&(window.gbTurntable=x),"function"==typeof define&&define.amd&&define("GB-canvas-turntable",[],function(){return x})}();