!function(){function t(t){return k?k+t:t.toLowerCase()}function e(t){return t=t.toLowerCase(),T?T+t:t}function n(t){E=t.getPrize,L=t.gotBack,t.config(function(e){y=t.prizes=e,v=y.length,i(t)}),o()}function i(t){if(t=t||{},t.id&&v>>>0!==0){var e,n=t.id,i=360/v/2+90,r=document.createElement("ul"),s=1/v,o=[];if(m=b(n),p=m.querySelector(".gb-turntable-canvas"),g=m.querySelector(".gb-turntable-container"),h=m.querySelector(".gb-turntable-btn"),!p.getContext)return void a("抱歉！浏览器不支持。");e=p.getContext("2d");for(var c=0;c<v;c++)e.save(),e.beginPath(),e.translate(150,150),e.moveTo(0,0),e.rotate((360/v*c-i)*Math.PI/180),e.arc(0,0,150,0,2*Math.PI/v,!1),c%2==0?e.fillStyle="#ffb820":e.fillStyle="#ffcb3f",e.fill(),e.lineWidth=.5,e.strokeStyle="#e4370e",e.stroke(),e.restore(),o.push('<li class="gb-turntable-item"> <span style="'+P+": rotate("+c*s+'turn)">'+t.prizes[c]+"</span> </li>"),c+1===v&&(r.className="gb-turntalbe-list",g.appendChild(r),r.innerHTML=o.join(""))}}function a(t){alert(t)}function r(){d(g,"gb-run"),g.style[P]="rotate(0deg)",g.style[P]=""}function s(t){r(),setTimeout(function(){f(g,"gb-run"),g.style[P]="rotate("+t+"deg)"},10)}function o(){l(h,"click",function(){f(h,"disabled"),E(function(t){w={prizeId:t[0],chances:t[1]},s(3600-t[0]*(360/v))}),l(g,S,c)})}function c(){w.chances&&d(h,"disabled"),L(y[w.prizeId])}function l(t,e,n){"function"==typeof addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function u(t,e){return!(!t||!e)&&(t.classList?t.classList.contains(e):t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")))}function f(t,e){t.classList?t.classList.add(e):u(t,e)||(t.className+=""+e)}function d(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}var b,m,g,p,v,y,h,E,L,w,T,k,z={"":"",Webkit:"webkit",Moz:"",O:"o",ms:"ms"},C=document.createElement("p"),N={};Object.keys(z).some(function(t){if(void 0!==C.style[t+"TransitionProperty"])return T=t?"-"+t.toLowerCase()+"-":"",k=z[t],!0}),N={cssPrefix:T,transform:e("Transform"),transitionEnd:t("TransitionEnd")};var P=N.transform,S=N.transitionEnd;b=function(t){return document.getElementById(t)};var x={init:function(t){return n(t)}};void 0===window.gbTurntable&&(window.gbTurntable=x),"function"==typeof define&&define.amd&&define("GB-canvas-turntable",[],function(){return x})}();